<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR.html11/DTD.html11.dtd">
<html xmlns="http://www.w3.org/1999.html" xml:lang="ko"><head><meta http-equiv="Cache-Control" content="no-cache"/><meta http-equiv="Pragma" content="no-cache"/><meta http-equiv="Expires" content="-1"/><title>동적으로 Submission 제어하기(생성,삭제,실행)</title><link rel="stylesheet" href="css/book.css" type="text/css" /><meta http-equiv="Content-Type" content="application.html+xml; charset=utf-8" /><meta name="EPB-UUID" content="b3283707c39ac371" /></head><body><div class="chapter_content"><h1 id="r_868da42a92b2b0f1" class="chapter_title">동적으로 Submission 제어하기(생성,삭제,실행)</h1><h1 id="r_533f55b605474769" class="element heading1" data-element-id="533f55b605474769"><div class="r_heading_inner"><span class="heading1_n">1</span><span>개요</span></div></h1><pre id="r_995f5dc8d3af83e4" class="element pre" data-element-id="995f5dc8d3af83e4">스크립트로 Submission을 생성, 삭제, 실행, 및 Submission의 객체를 반환 받는 예제입니다.
공통 스크립트 작성 시 주로 사용됩니다.</pre><p id="r_b154fff49c4fe819" class="element r_example_link_p" data-element-id="b154fff49c4fe819"><a class="link" target="_blank" href="http://example.websquare.kr/link.html?p=P00030">P00030</a></p><h1 id="r_4ff1103807056516" class="element heading1" data-element-id="4ff1103807056516"><div class="r_heading_inner"><span class="heading1_n">2</span><span>구현된 기능</span></div></h1><ul id="r_3c74122da4278918" class="element unordered_list" data-element-id="3c74122da4278918"><li><p>Submission 생성하기</p></li><li><p>Submission 삭제하기</p></li><li><p>Submission 실행하기</p></li><li><p>Submission 객체 정보 반환받기</p></li></ul><h1 id="r_be002f372bf5af2c" class="element heading1" data-element-id="be002f372bf5af2c"><div class="r_heading_inner"><span class="heading1_n">3</span><span>예제 테스트 방법</span></div></h1><p id="r_178619680cd59311" class="element normal" data-element-id="178619680cd59311">이 예제는 예제 화면의 영역 [<span class="r_blue001_span">로그 확인</span>]의 textarea와 브라우저 개발자 도구의 콘솔에 실행 결과 값이 출력됩니다.</p><div id="r_dfb6a237fabefd4b" class="element image" data-element-id="dfb6a237fabefd4b"><p class="caption"><span class="image_caption_n">그림 1.</span>로그 출력 영역 참고 이미지</p><p class="content"><img alt="" src="images/image042.png" width="374" height="186" /></p></div><dl id="r_a739a28b0b5dfe70" class="element definition_list" data-element-id="a739a28b0b5dfe70"><dt>Submission 생성하기</dt><dd><p>Submission을 생성합니다.</p><p>1. 버튼 <span class="r_btn_refresh_span">새로고침</span>을 클릭합니다.</p><p>2. 버튼 <span class="r_exec_btn_style_span">실행1</span>을 클릭합니다.</p><p>3. 생성된 객체의 정보를 확인하기 위해 버튼 <span class="r_exec_btn_style_span">실행4</span>를 클릭합니다.</p><p>4. 브라우저 개발자 도구의 콘솔로 반환된 객체를 확인합니다.</p></dd></dl><dl id="r_35629ec482cfa9a1" class="element definition_list" data-element-id="35629ec482cfa9a1"><dt>Submission 삭제하기</dt><dd><p>Submission을 삭제합니다.</p><p>1. 버튼 <span class="r_btn_refresh_span">새로고침</span>을 클릭합니다.</p><p>2. 버튼 <span class="r_exec_btn_style_span">실행2</span>를 클릭합니다.</p><p>3. 삭제된 Submission 객체의 정보를 확인합니다.</p><p>버튼 <span class="r_exec_btn_style_span">실행4</span>를 클릭합니다.</p><p>아래와 같은 로그가 출력됩니다.</p><p>[로그 출력 예시]</p><p>** scwin.btn_ex4_onclick 실행 **</p><p>$p.getSubmission("sbm_example1");</p><p>"sbm_example1" ID를 가진 submission객체가 반환됩니다. 브라우저 개발자 도구의 콘솔을 확인하세요.</p><p>"sbm_example1" ID를 가진 submission객체를 찾을 수 없습니다.</p><p>-----------------------------</p></dd></dl><dl id="r_e5ef3bfb9aa9e492" class="element definition_list" data-element-id="e5ef3bfb9aa9e492"><dt>Submission 실행하기</dt><dd><p>1. 버튼 <span class="r_btn_refresh_span">새로고침</span>을 클릭합니다.</p><p>2. 버튼 <span class="r_exec_btn_style_span">실행3</span>을 클릭합니다.</p><p>3. 실행 후 응답 데이터를 확인합니다.</p><p>아래와 같은 로그가 출력됩니다. (브라우저 개발자 도구의 콘솔로 응답 객체가 출력됩니다)</p><p>[로그 출력 예시]</p><p>** scwin.btn_ex3_onclick 실행 **</p><p>$p.executeSubmission("sbm_example1");</p><p>"sbm_example1" ID를 가진 submission이 없는 경고 로그가 출력됩니다. 브라우저 개발자 도구의 콘솔을 확인하세요.</p><p>submitDoneHandler</p><p>{ "dc_resUserListData":</p><p>	[{</p><p>		"name":"김수녕"</p><p>		, "birthday" : "19710405"</p><p>		, "height" : "164"</p><p>		, "weight" : "58"</p><p>		, "gender" : "F"</p><p>	},{</p><p>		"name":"김연아"</p><p>		, "birthday" : "19900905"</p><p>		, "height" : "164"</p><p>		, "weight" : "47"</p><p>		, "gender" : "F"</p><p>	}]</p><p>}</p><p>-----------------------------</p></dd></dl><dl id="r_abf72058a11d50af" class="element definition_list" data-element-id="abf72058a11d50af"><dt>Submission 객체 정보 반환받기</dt><dd><p>Submission 객체 정보를 반환 받습니다.</p><p>1. 버튼 <span class="r_btn_refresh_span">새로고침</span>을 클릭합니다.</p><p>2. 버튼 <span class="r_exec_btn_style_span">실행4</span>를 클릭합니다.</p><p>3. 반환값을 확인합니다.</p><p>3.1. 생성된 Submission이 없는 경우 아래와 같은 로그가 출력됩니다.</p><p>[로그 출력 예시]</p><p>** scwin.btn_ex4_onclick 실행 **</p><p>$p.getSubmission("sbm_example1");</p><p>"sbm_example1" ID를 가진 submission객체가 반환됩니다. 브라우저 개발자 도구의 콘솔을 확인하세요.</p><p>"sbm_example1" ID를 가진 submission객체를 찾을 수 없습니다.</p><p>--------------------------------</p><p>3.2 생성된 Submission이 있는 경우 아래와 같은 로그가 출력됩니다.</p><p>[로그 출력 예시]</p><p>** scwin.btn_ex4_onclick 실행 **</p><p>$p.getSubmission("sbm_example1");</p><p>"sbm_example1" ID를 가진 submission객체가 반환됩니다. 브라우저 개발자 도구의 콘솔을 확인하세요.</p><p>action : /data/sampleData/sampleData_json_dc_list.json</p><p>ref : data:json,dma_request</p><p>--------------------------------</p></dd></dl><h1 id="r_3509eb41ec8d8b36" class="element heading1" data-element-id="3509eb41ec8d8b36"><div class="r_heading_inner"><span class="heading1_n">4</span><span>구현 예시</span></div></h1><h2 id="r_8806976fc12e305a" class="element heading2" data-element-id="8806976fc12e305a"><div class="r_heading_inner"><span class="heading2_n">4.1</span><span>Submission 생성하기</span></div></h2><div id="r_254bc63849ae3fa7" class="element code support_code_numbering" data-element-id="254bc63849ae3fa7"><pre><span class="digits_10 code_line"></span><span class="r_h_keyword_span">var</span> jsnSubmissionOptions;
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//옵션 설정.</span>
<span class="digits_10 code_line"></span>jsnSubmissionOptions = {
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;id : <span class="r_h_string_span">"sbm_example1"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;ref : <span class="r_h_string_span">"data:json,dma_request"</span>,              <span class="r_h_comment_span">//생략 가능 - $p.executeSubmission 호출시 request data 전달이 가능합니다. </span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;target : <span class="r_h_string_span">"data:json,dc_resUserListData"</span>,    <span class="r_h_comment_span">//생략 가능 - submitDoneHandler 함수에서 response data의 제어가 가능합니다.</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;action : <span class="r_h_string_span">"/data/sampleData/sampleData_json_dc_list.json"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;mediatype : <span class="r_h_string_span">"application/json"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;submitDoneHandler : scwin.example_submitDoneHandler,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;submitErrorHandler : scwin.example_submitErrorHandler
<span class="digits_10 code_line"></span>};
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//submission 생성</span>
<span class="digits_10 code_line"></span>$p.createSubmission( jsnSubmissionOptions );</pre></div><p id="r_0d88cf06d9b84e25" class="element normal" data-element-id="0d88cf06d9b84e25">아래는 이벤트 핸들러를 정의 예시입니다.</p><div id="r_8fb3201f23b38b2c" class="element code support_code_numbering" data-element-id="8fb3201f23b38b2c"><pre><span class="digits_10 code_line"></span><span class="r_h_comment_span">//submssion의 submitDoneHandler</span>
<span class="digits_10 code_line"></span>scwin.example_submitDoneHandler = <span class="r_h_keyword_span">function</span> (e) {
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_comment_span">//응답 본문 console 출력</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;console.log(e.responseText);
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_comment_span">//응답 객체 console 출력</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;console.log(e.responseJSON);
<span class="digits_10 code_line"></span>};
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//submision의 submitErrorHandler</span>
<span class="digits_10 code_line"></span>scwin.example_submitErrorHandler = <span class="r_h_keyword_span">function</span> (e) {
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_comment_span">//개발자 도구 console에 에러 객체 출력</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;console.error(<span class="r_h_string_span">"submitErrorHandler"</span>, e);
<span class="digits_10 code_line"></span>};</pre></div><h2 id="r_cc8f0e59b1a77298" class="element heading2" data-element-id="cc8f0e59b1a77298"><div class="r_heading_inner"><span class="heading2_n">4.2</span><span>Submission 삭제하기</span></div></h2><div id="r_0f07c14b41d0f1d4" class="element code support_code_numbering" data-element-id="0f07c14b41d0f1d4"><pre><span class="digits_1 code_line"></span><span class="r_h_comment_span">//submission 삭제. - "sbm_example1" ID를 가진 submission을 삭제합니다.</span>
<span class="digits_1 code_line"></span>$p.deleteSubmission(<span class="r_h_string_span">"sbm_example1"</span>);</pre></div><div id="r_1cfbf180eda0a4be" class="element caution" data-element-id="1cfbf180eda0a4be"><p>존재하지 않는 submission인 경우 오류 로그가 출력됩니다. 오류 로그만 출력하고 이후 로직은 수행이 되지만 해당 로그 출력을 원하지 않는 경우는 <span class="r_user_input1_span">$p.deleteSubmission</span> 호출 전 <span class="r_user_input1_span">$p.getSubmission</span> API를 통해 존재 유무를 판단 후 <span class="r_user_input1_span">$p.deleteSubmission</span> API를 호출하시면 됩니다.</p></div><h2 id="r_289c68ec9432aee3" class="element heading2" data-element-id="289c68ec9432aee3"><div class="r_heading_inner"><span class="heading2_n">4.3</span><span>Submission 실행하기</span></div></h2><div id="r_e5731e25f1498531" class="element code support_code_numbering" data-element-id="e5731e25f1498531"><pre><span class="digits_1 code_line"></span><span class="r_h_comment_span">//submission 실행. - "sbm_example1" ID를 가진 submission을 실행합니다.</span>
<span class="digits_1 code_line"></span>$p.executeSubmission(<span class="r_h_string_span">"sbm_example1"</span>);</pre></div><h2 id="r_224cc62eafc750b4" class="element heading2" data-element-id="224cc62eafc750b4"><div class="r_heading_inner"><span class="heading2_n">4.4</span><span>Submission 객체 정보 반환받기</span></div></h2><div id="r_42dded89957fa659" class="element code support_code_numbering" data-element-id="42dded89957fa659"><pre><span class="digits_10 code_line"></span><span class="r_h_keyword_span">var</span> objSubmission;
<span class="digits_10 code_line"></span>    
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//submisison 객체 반환 - "sbm_example1" ID를 가진 submission을 반환합니다.</span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//반환 받은 객체의 속성을 재정의하여 사용할 수 있습니다.</span>
<span class="digits_10 code_line"></span>objSubmission = $p.getSubmission(<span class="r_h_string_span">"sbm_example1"</span>);
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_keyword_span">if</span> (!objSubmission) {
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_comment_span">//반환된 submission객체가 없는 경우 - null 반환</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;
<span class="digits_10 code_line"></span>} <span class="r_h_keyword_span">else</span> {
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_comment_span">//반환된 submission의 정보 출력</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_comment_span">//objSubmission.action</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_comment_span">//objSubmission.ref</span>
<span class="digits_10 code_line"></span>}</pre></div><h1 id="r_9aee46e0cf0016ef" class="element heading1" data-element-id="9aee46e0cf0016ef"><div class="r_heading_inner"><span class="heading1_n">5</span><span>주요 API</span></div></h1><ul id="r_4fdb28db7931dddc" class="element unordered_list" data-element-id="4fdb28db7931dddc"><li><p><span class="r_ex_api_method_span">$p.createSubmission( submissionObj )</span></p></li><li><p><span class="r_ex_api_method_span">$p.deleteSubmission( submissionID )</span></p></li><li><p><span class="r_ex_api_method_span">$p.executeSubmission( submissionID , requestData , obj )</span></p></li><li><p><span class="r_ex_api_method_span">$p.getSubmission( submissionID )</span></p></li></ul></div></body></html>