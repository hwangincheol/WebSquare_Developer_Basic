<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR.html11/DTD.html11.dtd">
<html xmlns="http://www.w3.org/1999.html" xml:lang="ko"><head><meta http-equiv="Cache-Control" content="no-cache"/><meta http-equiv="Pragma" content="no-cache"/><meta http-equiv="Expires" content="-1"/><title>동적으로 DataMap, DataList 생성하기</title><link rel="stylesheet" href="css/book.css" type="text/css" /><meta http-equiv="Content-Type" content="application.html+xml; charset=utf-8" /><meta name="EPB-UUID" content="b3283707c39ac371" /></head><body><div class="chapter_content"><h1 id="r_56b29b94b3402601" class="chapter_title">동적으로 DataMap, DataList 생성하기</h1><h1 id="r_005b7788b8602fd8" class="element heading1" data-element-id="005b7788b8602fd8"><div class="r_heading_inner"><span class="heading1_n">1</span><span>개요</span></div></h1><p id="r_41673c6d69312191" class="element normal" data-element-id="41673c6d69312191">동적으로 DataMap, DataList를 생성하는 예제입니다.</p><p id="r_a2cea3a29086a541" class="element r_example_link_p" data-element-id="a2cea3a29086a541"><a class="link" target="_blank" href="http://example.websquare.kr/link.html?p=P00046">P00046</a></p><h1 id="r_0c704143d64fffcd" class="element heading1" data-element-id="0c704143d64fffcd"><div class="r_heading_inner"><span class="heading1_n">2</span><span>구현된 기능</span></div></h1><ul id="r_badfff1afb97c7b4" class="element unordered_list" data-element-id="badfff1afb97c7b4"><li><p>DataMap 생성하기</p></li><li><p>DataList 생성하기</p></li></ul><h1 id="r_5a70da656b626aae" class="element heading1" data-element-id="5a70da656b626aae"><div class="r_heading_inner"><span class="heading1_n">3</span><span>예제 테스트 방법</span></div></h1><h2 id="r_54c3d5f23011ea3c" class="element heading2" data-element-id="54c3d5f23011ea3c"><div class="r_heading_inner"><span class="heading2_n">3.1</span><span>알아두기</span></div></h2><p id="r_53dcfecd18a91275" class="element normal" data-element-id="53dcfecd18a91275">이 예제는 예제 화면의 영역 [<span class="r_blue001_span">로그 확인</span>]의 textarea에 실행 결과 값이 출력됩니다.</p><div id="r_15d8f6f4876becae" class="element image" data-element-id="15d8f6f4876becae"><p class="caption"><span class="image_caption_n">그림 1.</span>로그 출력 영역 참고 이미지</p><p class="content"><img alt="" src="images/image007.png" width="374" height="184" /></p></div><h2 id="r_8500250e058e91fb" class="element heading2" data-element-id="8500250e058e91fb"><div class="r_heading_inner"><span class="heading2_n">3.2</span><span>DataCollection 확인 하기</span></div></h2><dl id="r_9a9d7d0865c9cc21" class="element definition_list" data-element-id="9a9d7d0865c9cc21"><dt>STEP1. 웹스퀘어 컨텍스트 메뉴를 실행합니다.</dt><dd><p>브라우저의 버튼 <span class="r_exec_btn_style_span">DataMap 생성하기</span>의 하단 영역에서 [Ctrl] 키를 누른 채 마우스 오른쪽 버튼을 클릭합니다.</p><p>아래의 이미지와 같이 컨텍스트 메뉴가 노출됩니다. [dataCollection보기] 메뉴를 클릭합니다.</p><p><img alt="" src="images/image008.png" width="242" height="237" /></p><p>DataCollection을 확인할 수 있는 팝업이 생성됩니다.</p></dd><dt>STEP2. dataColleciton의 목록을 클릭하여 생성되어 있는 목록을 확인합니다.</dt><dd><p>아래는 실행된 이미지 예시입니다.</p><p><img alt="" src="images/image009.png" width="544" height="435" /></p></dd></dl><h2 id="r_b1a2246e6b478652" class="element heading2" data-element-id="b1a2246e6b478652"><div class="r_heading_inner"><span class="heading2_n">3.3</span><span>DataMap 생성하기</span></div></h2><dl id="r_899ccba23b7cab02" class="element definition_list" data-element-id="899ccba23b7cab02"><dt>STEP1. 현재 화면의 DataCollection을 확인합니다.</dt><dd><p>확인 방법은 <a class="reference text" href="sp5_ex_P00046.html#r_8500250e058e91fb" data-reference="8500250e058e91fb">DataCollection 확인 하기</a>에 설명되어있습니다.</p><p>화면의 버튼을 클릭하기 전인 경우 두개의 데이터 객체(dlt_book, dma_userInfo)가 생성되어있습니다. </p></dd><dt>STEP2. 버튼 <span class="r_exec_btn_style_span">DataMap 생성하기</span>를 클릭합니다.</dt><dd><p>로그 출력창에 실행 단계 로그가 출력됨을 확인합니다.</p><p><em>[로그 예시]</em></p><p>[10:44:27] ** [실행1] - DataMap 생성하기 scwin.btn_ex1_onclick 실행 시작 **</p><p>[10:44:27] &gt; 1단계 DataMap 생성 완료</p><p>[10:44:27] &gt; 2단계 DataMap setJSON 호출 완료</p><p>[10:44:27] {"name":"Inswave Systems","address":"서울시 강서구 공항대로 247, 퀸즈파크나인 C동 12층"}</p><p>[10:44:27] &gt; 3단계 DataMap getJSON 호출 완료</p><p>[10:44:27] ** [실행1] - DataMap 생성하기 scwin.btn_ex1_onclick 실행 종료 **</p></dd><dt>STEP3. 현재 화면의 DataCollection을 확인합니다.</dt><dd><p>확인 방법은 <a class="reference text" href="https://docs1.inswave.com/r/document/view/ttp://docs.inswave.com:1975/r/editor/edit/bbaec6dd1f18a3bb#8500250e058e91fb">DataCollection 확인 하기</a>에 설명되어있습니다.</p><p>dataCollection 목록에 <span class="r_blue001_span">dma_dynamic1</span>이 추가되었음을 확인합니다.</p><p>아래의 이미지와 같이 <span class="r_blue001_span">dma_dynamic1</span>을 선택하고 버튼 [<span class="r_blue001_span">조회</span>]를 클릭하여 할당된 데이터를 확인합니다.</p><p><img alt="" src="images/image010.png" width="557" height="422" /></p></dd></dl><h2 id="r_28840f1be5a37912" class="element heading2" data-element-id="28840f1be5a37912"><div class="r_heading_inner"><span class="heading2_n">3.4</span><span>DataList 생성하기</span></div></h2><dl id="r_0635e5b98b602717" class="element definition_list" data-element-id="0635e5b98b602717"><dt>STEP1. 현재 화면의 DataCollection을 확인합니다.</dt><dd><p>확인 방법은 <a class="reference text" href="sp5_ex_P00046.html#r_8500250e058e91fb" data-reference="8500250e058e91fb">DataCollection 확인 하기</a>에 설명되어있습니다.</p><p>화면의 버튼을 클릭하기 전인 경우 두개의 데이터 객체(dlt_book, dma_userInfo)가 생성되어있습니다. </p></dd><dt>STEP2. 버튼 <span class="r_exec_btn_style_span">DataList 생성하기</span>를 클릭합니다.</dt><dd><p>로그 출력창에 실행 단계 로그가 출력됨을 확인합니다.</p><p><em>[로그 예시]</em></p><p>[10:45:30] ** [실행2] - DataList 생성하기 scwin.btn_ex2_onclick 실행 시작 **</p><p>[10:45:30] &gt; 1단계 DataList 생성 완료</p><p>[10:45:30] &gt; 2단계 DataList setJSON 호출 완료</p><p>[10:45:30] [{"code":"1","label":"","rowStatus":"R"},{"code":"2","label":"","rowStatus":"R"},{"code":"3","label":"","rowStatus":"R"}]</p><p>[10:45:30] &gt; 3단계 DataList getAllJSON 호출 완료</p><p>[10:45:30] ** [실행2] - DataList 생성하기 scwin.btn_ex2_onclick 실행 종료 **</p></dd><dt>STEP3. 현재 화면의 DataCollection을 확인합니다.</dt><dd><p>확인 방법은 <a class="reference text" href="https://docs1.inswave.com/r/document/view/ttp://docs.inswave.com:1975/r/editor/edit/bbaec6dd1f18a3bb#8500250e058e91fb">DataCollection 확인 하기</a>에 설명되어있습니다.</p><p>dataCollection 목록에 <span class="r_blue001_span">dlt_dynamic1</span>이 추가되었음을 확인합니다.</p><p>아래의 이미지와 같이 <span class="r_blue001_span">dlt_dynamic1</span>을 선택하고 버튼 [<span class="r_blue001_span">조회</span>]를 클릭하여 할당된 데이터를 확인합니다.</p><p><img alt="" src="images/image011.png" width="566" height="476" /></p></dd></dl><h1 id="r_e2d8e43449019565" class="element heading1" data-element-id="e2d8e43449019565"><div class="r_heading_inner"><span class="heading1_n">4</span><span>구현 예시</span></div></h1><h2 id="r_47df54064ccf180e" class="element heading2" data-element-id="47df54064ccf180e"><div class="r_heading_inner"><span class="heading2_n">4.1</span><span>DataMap 생성하기</span></div></h2><p id="r_8af9d00fa9c680d7" class="element normal" data-element-id="8af9d00fa9c680d7">데이터 객체의 옵션을 JSON으로 할당한 예시입니다.</p><div id="r_575bc2fab0f37944" class="element code support_code_numbering" data-element-id="575bc2fab0f37944"><pre><span class="digits_10 code_line"></span><span class="r_h_keyword_span">var</span> jsnOption;
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//DataMap 속성 정의</span>
<span class="digits_10 code_line"></span>jsnOption = {
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"id"</span> : <span class="r_h_string_span">"dma_dynamic1"</span>,  <span class="r_h_comment_span">//생성할 DatMap의 ID입니다.</span>
<span class="digits_10 code_line"></span>    <span class="r_h_string_span">"type"</span> : <span class="r_h_string_span">"dataMap"</span>,     <span class="r_h_comment_span">//생성할 데이터객체의 타입입니다. dataMap 고정.</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"option"</span> : {
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"baseNode"</span>:<span class="r_h_string_span">"map"</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;},
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"keyInfo"</span> : [
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"id"</span> : <span class="r_h_string_span">"name"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"name"</span> : <span class="r_h_string_span">"성명"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"dataType"</span> : <span class="r_h_string_span">"text"</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},{
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"id"</span> : <span class="r_h_string_span">"address"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"name"</span> : <span class="r_h_string_span">"주소"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"dataType"</span> : <span class="r_h_string_span">"text"</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;]
<span class="digits_10 code_line"></span>};
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//1. DataCollection 생성하기</span>
<span class="digits_10 code_line"></span>$p.data.create(jsnOption);
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//2. 생성된 객체에 Data 할당하기</span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//옵션에 적용한 id로 직접 접근이 가능합니다.</span>
<span class="digits_10 code_line"></span>dma_dynamic1.setJSON({
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"name"</span> : <span class="r_h_string_span">"Inswave Systems"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"address"</span> : <span class="r_h_string_span">"서울시 강서구 공항대로 247, 퀸즈파크나인 C동 12층"</span>
<span class="digits_10 code_line"></span>});
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">/*
<span class="digits_10 code_line"></span>//또는 아래와 같이 $p.getComponentById API로 객체를 반환 받아 제어할 수 있습니다.
<span class="digits_10 code_line"></span>let cmpDataMap = $p.getComponentById("dma_dynamic1");
<span class="digits_10 code_line"></span>cmpDataMap.setJSON({
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;"name" : "Inswave Systems",
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;"address" : "서울시 강서구 공항대로 247, 퀸즈파크나인 C동 12층"
<span class="digits_10 code_line"></span>});
<span class="digits_10 code_line"></span>*/</span></pre></div><h2 id="r_38534585657ace97" class="element heading2" data-element-id="38534585657ace97"><div class="r_heading_inner"><span class="heading2_n">4.2</span><span>DataList 생성하기</span></div></h2><p id="r_7781a25cf54e1174" class="element normal" data-element-id="7781a25cf54e1174">데이터 객체의 옵션을 JSON으로 할당한 예시입니다.</p><div id="r_b607bfca851bef6b" class="element code support_code_numbering" data-element-id="b607bfca851bef6b"><pre><span class="digits_10 code_line"></span><span class="r_h_keyword_span">var</span> jsnOption;
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//DataList 속성 정의</span>
<span class="digits_10 code_line"></span>jsnOption = { 
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"id"</span> : <span class="r_h_string_span">"dlt_dynamic1"</span>,  <span class="r_h_comment_span">//생성할 DatList의 ID입니다.</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"type"</span> : <span class="r_h_string_span">"dataList"</span>,    <span class="r_h_comment_span">//생성할 데이터객체의 타입입니다. dataList 고정.</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"option"</span> : { 
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"baseNode"</span>: <span class="r_h_string_span">"list"</span>,
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"repeatNode"</span>: <span class="r_h_string_span">"map"</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;},
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"columnInfo"</span> : [ 
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"id"</span> : <span class="r_h_string_span">"code"</span>, 
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"name"</span>: <span class="r_h_string_span">"코드"</span>, 
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"dataType"</span> :<span class="r_h_string_span">"text"</span> 
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, {
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"id"</span> :<span class="r_h_string_span">"label"</span>, 
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"name"</span> : <span class="r_h_string_span">"코드명"</span>, 
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"dataType"</span> :<span class="r_h_string_span">"text"</span>
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;] 
<span class="digits_10 code_line"></span>};
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//1. DataCollection 생성하기</span>
<span class="digits_10 code_line"></span>$p.data.create(jsnOption);
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//2. 생성된 객체에 Data 할당하기</span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">//옵션에 적용한 id로 직접 접근이 가능합니다.</span>
<span class="digits_10 code_line"></span>dlt_dynamic1.setJSON([
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{<span class="r_h_string_span">"lable"</span> : <span class="r_h_string_span">"소설"</span>, <span class="r_h_string_span">"code"</span> : <span class="r_h_string_span">"1"</span>},
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{<span class="r_h_string_span">"lable"</span> : <span class="r_h_string_span">"인문"</span>, <span class="r_h_string_span">"code"</span> : <span class="r_h_string_span">"2"</span>},
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{<span class="r_h_string_span">"lable"</span> : <span class="r_h_string_span">"자기계발"</span>, <span class="r_h_string_span">"code"</span> : <span class="r_h_string_span">"3"</span>}
<span class="digits_10 code_line"></span>]);
<span class="digits_10 code_line"></span>
<span class="digits_10 code_line"></span><span class="r_h_comment_span">/*
<span class="digits_10 code_line"></span>//또는 아래와 같이 $p.getComponentById API로 객체를 반환 받아 제어할 수 있습니다.
<span class="digits_10 code_line"></span>let cmpDataList = $p.getComponentById("dlt_dynamic1");
<span class="digits_10 code_line"></span>cmpDataList.setJSON([
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{"lable" : "소설", "code" : "1"},
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{"lable" : "인문", "code" : "2"},
<span class="digits_10 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;{"lable" : "자기계발", "code" : "3"}
<span class="digits_10 code_line"></span>]);
<span class="digits_10 code_line"></span>*/</span></pre></div><h1 id="r_0a5153621ca6538d" class="element heading1" data-element-id="0a5153621ca6538d"><div class="r_heading_inner"><span class="heading1_n">5</span><span>주요 API</span></div></h1><dl id="r_ba37f7cb2cda7888" class="element definition_list" data-element-id="ba37f7cb2cda7888"><dt><span class="r_ex_api_method_span">$p.data.create( dataCollectionString , dataCollectionObject )</span></dt></dl></div></body></html>