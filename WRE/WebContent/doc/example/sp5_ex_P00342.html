<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR.html11/DTD.html11.dtd">
<html xmlns="http://www.w3.org/1999.html" xml:lang="ko"><head><meta http-equiv="Cache-Control" content="no-cache"/><meta http-equiv="Pragma" content="no-cache"/><meta http-equiv="Expires" content="-1"/><title>[DataMap] JSON 형식의 데이터를 할당하고 원본 데이터로 지정하기</title><link rel="stylesheet" href="css/book.css" type="text/css" /><meta http-equiv="Content-Type" content="application.html+xml; charset=utf-8" /><meta name="EPB-UUID" content="b3283707c39ac371" /></head><body><div class="chapter_content"><h1 id="r_1f929ca23e16ae2d" class="chapter_title">[DataMap] JSON 형식의 데이터를 할당하고 원본 데이터로 지정하기</h1><h1 id="r_750a9522ada304ba" class="element heading1" data-element-id="750a9522ada304ba"><div class="r_heading_inner"><span class="heading1_n">1</span><span>개요</span></div></h1><pre id="r_5e3d5be10ac7ca92" class="element pre" data-element-id="5e3d5be10ac7ca92">DataMap의 함수 'setJSON'와 함수 'reform'의 예제입니다.
함수 'setJSON'은 JSON 형식의 데이터로 DataMap의 데이터를 할당할 수 있습니다. DataMap에 정의되지 않은 'Key'는 무시됩니다.
함수 'reform'은 DataMap의 상태를 초기화하고 현재의 데이터를 원본 데이터로 설정합니다.</pre><p id="r_98d0ff40457153cf" class="element r_example_link_p" data-element-id="98d0ff40457153cf"><a class="link" target="_blank" href="http://example.websquare.kr/link.html?p=P00342">P00342</a></p><div id="r_5b6765674f46e7ce" class="element tip" data-element-id="5b6765674f46e7ce"><p>함수 'setJSON'으로 할당된 데이터는 원본 데이터로 지정되지 않기 때문에, 원본 데이터로 지정하기 위해서는 함수 'reform'을 함께 사용해야 합니다.</p></div><h1 id="r_04aa0dbc1de4876d" class="element heading1" data-element-id="04aa0dbc1de4876d"><div class="r_heading_inner"><span class="heading1_n">2</span><span>구현된 기능</span></div></h1><ul id="r_7030fcea5f5d99a2" class="element unordered_list" data-element-id="7030fcea5f5d99a2"><li><p>JSON 형식의 데이터를 할당하고 원본 데이터로 지정하기</p></li></ul><h1 id="r_048e9ddf8cd9a35b" class="element heading1" data-element-id="048e9ddf8cd9a35b"><div class="r_heading_inner"><span class="heading1_n">3</span><span>예제 테스트 방법</span></div></h1><h2 id="r_a3608939f47f9a75" class="element heading2" data-element-id="a3608939f47f9a75"><div class="r_heading_inner"><span class="heading2_n">3.1</span><span>JSON 형식의 데이터를 할당하고 원본 데이터로 지정하기</span></div></h2><pre id="r_56e1879aed4504d9" class="element pre" data-element-id="56e1879aed4504d9">화면에 구성된 버튼을 순서대로 클릭하여 테스트합니다.</pre><p id="r_ec2c235985b6ed31" class="element r_heading_dt_p" data-element-id="ec2c235985b6ed31">STEP 1. 초기 상태를 확인합니다.</p><pre id="r_a5d3e38dade13d2f" class="element pre" data-element-id="a5d3e38dade13d2f">다음은 DataMap에 할당된 데이터입니다.</pre><p id="r_bb2dff5162936173" class="element r_caption_code_1_p" data-element-id="bb2dff5162936173">JSON 형식의 데이터</p><div id="r_f9ec76e161247726" class="element code support_code_numbering" data-element-id="f9ec76e161247726"><pre><span class="digits_1 code_line"></span>{
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_attribute_name_span">"categoryLabel"</span>: <span class="r_h_string_span">"인문"</span>,
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_attribute_name_span">"label"</span>: <span class="r_h_string_span">"내가 틀릴 수도 있습니다"</span>
<span class="digits_1 code_line"></span>}</pre></div><pre id="r_91f5b7dea37b4f27" class="element pre" data-element-id="91f5b7dea37b4f27">DataMap의 데이터를 화면의 폼에 연결하여 출력하고 있습니다. DataMap의 데이터가 변경되면 화면의 출력 데이터도 변경됩니다.</pre><div id="r_f4fd411e6c8a3572" class="element image" data-element-id="f4fd411e6c8a3572"><p class="caption"><span class="image_caption_n">그림 1.</span>브라우저(Chrome) 실행 예시</p><p class="content"><img alt="" src="images/image105.png" width="340" height="70" /></p></div><p id="r_38bf5afd8ccbfed4" class="element r_heading_dt_p" data-element-id="38bf5afd8ccbfed4">STEP 2. 수정된 'key' 목록을 확인합니다.</p><p id="r_67a7171f0e5b3494" class="element normal" data-element-id="67a7171f0e5b3494">버튼 <span class="r_exec_btn_style_span">1. 변경된 데이터의 'key' 목록 반환받기</span>을 클릭합니다.</p><p id="r_642961bea3ab2050" class="element r_heading_dt_p" data-element-id="642961bea3ab2050">STEP 3. 실행 결과를 확인합니다.</p><pre id="r_00e025c9d831ae4f" class="element pre" data-element-id="00e025c9d831ae4f">DataMap의 변경된 데이터의 'key' 목록이 '로그 확인' 영역과 브라우저 개발자 도구 콘솔에 출력됩니다.
변경된 데이터가 없기 때문에 빈 배열이 반환됩니다.</pre><p id="r_72420bb4f88220a6" class="element r_caption_code_1_p" data-element-id="72420bb4f88220a6">로그</p><div id="r_837abe7fbf9c9cee" class="element code support_code_numbering" data-element-id="837abe7fbf9c9cee"><pre><span class="digits_1 code_line"></span>[04:43:02] # 스크립트 dma_exam1.getModifiedKey(); 반환 값: 
<span class="digits_1 code_line"></span>[]</pre></div><p id="r_dcd3b90c69f21c21" class="element r_heading_dt_p" data-element-id="dcd3b90c69f21c21">STEP 4. JSON 형식의 데이터를 할당합니다.</p><p id="r_23544114025d82f8" class="element normal" data-element-id="23544114025d82f8">버튼 <span class="r_exec_btn_style_span">2. 스크립트로 데이터(도서명) 할당하기</span>을 클릭합니다.</p><p id="r_ddebc68e2af6d504" class="element r_heading_dt_p" data-element-id="ddebc68e2af6d504">STEP 5. 실행 결과를 확인합니다.</p><pre id="r_6e1d095c45373991" class="element pre" data-element-id="6e1d095c45373991">도서명이 '그렇게 인생은 이야기가 된다'로 변경됩니다.</pre><div id="r_d7de238dd92bbdea" class="element image" data-element-id="d7de238dd92bbdea"><p class="caption"><span class="image_caption_n">그림 2.</span>브라우저(Chrome) 실행 예시</p><p class="content"><img alt="" src="images/image106.png" width="261" height="69" /></p></div><p id="r_c9f9c526ba08202d" class="element r_heading_dt_p" data-element-id="c9f9c526ba08202d">STEP 6. 수정된 'key' 목록을 확인합니다.</p><p id="r_fd1df3c15c6d9137" class="element normal" data-element-id="fd1df3c15c6d9137">버튼 <span class="r_exec_btn_style_span">3. 변경된 데이터의 'key' 목록 반환받기</span>을 클릭합니다.</p><p id="r_302108821a8097be" class="element r_heading_dt_p" data-element-id="302108821a8097be">STEP 7. 실행 결과를 확인합니다.</p><pre id="r_193ed49091218ca3" class="element pre" data-element-id="193ed49091218ca3">DataMap의 변경된 데이터의 'key' 목록이 '로그 확인' 영역과 브라우저 개발자 도구 콘솔에 출력됩니다.</pre><p id="r_3d22ea0181360a21" class="element r_caption_code_1_p" data-element-id="3d22ea0181360a21">로그</p><div id="r_cb07ce098b99fee7" class="element code support_code_numbering" data-element-id="cb07ce098b99fee7"><pre><span class="digits_1 code_line"></span>[04:46:39] # 스크립트 dma_exam1.getModifiedKey(); 반환 값: 
<span class="digits_1 code_line"></span>["label"]</pre></div><p id="r_1a7e71c0f85e48d5" class="element r_heading_dt_p" data-element-id="1a7e71c0f85e48d5">STEP 8. JSON 형식의 데이터를 할당하고 원본 데이터로 지정합니다.</p><p id="r_974423339ee53c50" class="element normal" data-element-id="974423339ee53c50">버튼 <span class="r_exec_btn_style_span">4. 스크립트로 데이터(도서명) 할당하고 원본 데이터로 지정하기</span>을 클릭합니다.</p><p id="r_c4f875ee89dc261e" class="element r_heading_dt_p" data-element-id="c4f875ee89dc261e">STEP 9. 실행 결과를 확인합니다.</p><pre id="r_1bc349d66b3eaa7c" class="element pre" data-element-id="1bc349d66b3eaa7c">도서명이 '사람일까 상황일까'로 변경됩니다.</pre><div id="r_801561f6f1e18169" class="element image" data-element-id="801561f6f1e18169"><p class="caption"><span class="image_caption_n">그림 3.</span>브라우저(Chrome) 실행 예시</p><p class="content"><img alt="" src="images/image107.png" width="197" height="69" /></p></div><p id="r_d3c2752a70a94a42" class="element r_heading_dt_p" data-element-id="d3c2752a70a94a42">STEP 10. 수정된 'key' 목록을 확인합니다.</p><p id="r_683d78bd01da66ab" class="element normal" data-element-id="683d78bd01da66ab">버튼 <span class="r_exec_btn_style_span">5. 변경된 데이터의 'key' 목록 반환받기</span>을 클릭합니다.</p><p id="r_fb8aee5ece72d59d" class="element r_heading_dt_p" data-element-id="fb8aee5ece72d59d">STEP 11. 실행 결과를 확인합니다.</p><pre id="r_1053fc8c76b88f08" class="element pre" data-element-id="1053fc8c76b88f08">DataMap의 변경된 데이터의 'key' 목록이 '로그 확인' 영역과 브라우저 개발자 도구 콘솔에 출력됩니다.
할당된 데이터가 원본 데이터로 지정되었기 때문에 빈 배열이 반환됩니다.</pre><p id="r_0d5cfc4fbd6c103d" class="element r_caption_code_1_p" data-element-id="0d5cfc4fbd6c103d">로그</p><div id="r_4543de7e7e6885d8" class="element code support_code_numbering" data-element-id="4543de7e7e6885d8"><pre><span class="digits_1 code_line"></span>[04:50:33] # 스크립트 dma_exam1.getModifiedKey(); 반환 값: 
<span class="digits_1 code_line"></span>[]</pre></div><h1 id="r_7edf54d3d8652924" class="element heading1" data-element-id="7edf54d3d8652924"><div class="r_heading_inner"><span class="heading1_n">4</span><span>구현 예시</span></div></h1><h2 id="r_aaf9e3d92a9d8013" class="element heading2" data-element-id="aaf9e3d92a9d8013"><div class="r_heading_inner"><span class="heading2_n">4.1</span><span>JSON 형식의 데이터를 할당하고 원본 데이터로 지정하기</span></div></h2><pre id="r_6df7d7c3d71541af" class="element pre" data-element-id="6df7d7c3d71541af">DataMap의 함수 'setJSON', 'reform'을 이용하여 스크립트를 작성합니다.
세부 설명은 아래의 스크립트 예시에 작성되었습니다.</pre><p id="r_779505c6f450c656" class="element r_caption_code_1_p" data-element-id="779505c6f450c656">스크립트</p><div id="r_76ab164cfcc3d4e3" class="element code support_code_numbering" data-element-id="76ab164cfcc3d4e3"><pre><span class="digits_1 code_line"></span><span class="r_h_comment_span">// 이 예시는 예제 파일에서는 스크립트 'scwin.btn_exam2_1_onclick'에 작성되어 있습니다.</span>
<span class="digits_1 code_line"></span>
<span class="digits_1 code_line"></span><span class="r_h_comment_span">// DataMap 'dma_exam1'에 key 'label'의 값을 할당합니다.</span>
<span class="digits_1 code_line"></span>dma_exam1.setJSON({
<span class="digits_1 code_line"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="r_h_string_span">"label"</span>: <span class="r_h_string_span">"사람일까 상황일까"</span>
<span class="digits_1 code_line"></span>});
<span class="digits_1 code_line"></span>
<span class="digits_1 code_line"></span><span class="r_h_comment_span">// DataMap 'dma_exam1'의 현재 데이터를 원본(Original) 데이터로 지정합니다. 데이터의 상태 값은 모두 초기화됩니다.</span>
<span class="digits_1 code_line"></span>dma_exam1.reform();</pre></div><h1 id="r_f7d3ff2f1a1a4974" class="element heading1" data-element-id="f7d3ff2f1a1a4974"><div class="r_heading_inner"><span class="heading1_n">5</span><span>주요 API</span></div></h1><ul id="r_4b61556bfa6683a0" class="element unordered_list" data-element-id="4b61556bfa6683a0"><li><p><span class="r_ex_api_method_span">setJSON( jsonData )</span></p></li><li><p><span class="r_ex_api_method_span">reform( )</span></p></li></ul><h1 id="r_97cbf61b596b3441" class="element heading1" data-element-id="97cbf61b596b3441"><div class="r_heading_inner"><span class="heading1_n">6</span><span>참고 문서</span></div></h1><ul id="r_7cc620204d02a9a9" class="element unordered_list" data-element-id="7cc620204d02a9a9"><li><p><span class="r_bold01_span">[웹스퀘어5 SP5 개발 가이드] DataMap</span></p><p>링크 : <a class="link" target="_blank" href="https://docs1.inswave.com/sp5_user_guide/e8b94a03286e4f9f#fb44ab6371dd8b59">https://docs1.inswave.com/sp5_user_guide/e8b94a03286e4f9f#fb44ab6371dd8b59</a></p></li></ul></div></body></html>